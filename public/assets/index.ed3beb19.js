var R=Object.defineProperty,O=Object.defineProperties;var L=Object.getOwnPropertyDescriptors;var T=Object.getOwnPropertySymbols;var _=Object.prototype.hasOwnProperty,q=Object.prototype.propertyIsEnumerable;var A=(a,t,n)=>t in a?R(a,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):a[t]=n,p=(a,t)=>{for(var n in t||(t={}))_.call(t,n)&&A(a,n,t[n]);if(T)for(var n of T(t))q.call(t,n)&&A(a,n,t[n]);return a},b=(a,t)=>O(a,L(t));import{r as i,j as S,u as C,L as k,N as F,a as U,B as j,R as G,b as y,c as D,d as $}from"./vendor.f01e59db.js";const z=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))c(l);new MutationObserver(l=>{for(const o of l)if(o.type==="childList")for(const d of o.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&c(d)}).observe(document,{childList:!0,subtree:!0});function n(l){const o={};return l.integrity&&(o.integrity=l.integrity),l.referrerpolicy&&(o.referrerPolicy=l.referrerpolicy),l.crossorigin==="use-credentials"?o.credentials="include":l.crossorigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function c(l){if(l.ep)return;l.ep=!0;const o=n(l);fetch(l.href,o)}};z();const x=i.exports.createContext(),e=S.exports.jsx,r=S.exports.jsxs,B=S.exports.Fragment,P=()=>{const a=i.exports.useContext(x),{login:t,autenticado:n}=a,c=C();i.exports.useEffect(()=>{n&&c("/")},[n]);const[l,o]=i.exports.useState({email:"",password:""}),d=u=>{o(b(p({},l),{[u.target.name]:u.target.value}))};return e("div",{className:"container mt-5 mx-auto",children:r("form",{onSubmit:u=>{u.preventDefault(),t(l)},children:[r("div",{className:"mb-3",children:[e("label",{className:"form-label",children:"E-mail"}),e("input",{type:"email",className:"form-control","aria-describedby":"emailHelp",name:"email",onChange:d})]}),r("div",{className:"mb-3",children:[e("label",{className:"form-label",children:"Contrasena"}),e("input",{type:"password",className:"form-control",name:"password",onChange:d})]}),e("div",{className:"d-flex flex-row-reverse",children:e("button",{type:"submit",className:"btn btn-primary",children:"Conectar"})})]})})};var M="/assets/logo2.2ebef660.svg";const I=()=>{const a=i.exports.useContext(x),{cerrarSesion:t}=a;return e("nav",{className:"navbar navbar-dark bg-primary",children:r("div",{className:"container-fluid",children:[r(k,{className:"navbar-brand",to:"/",children:[e("img",{src:M,width:"30",height:"30",className:"d-inline-block align-top mx-2",alt:""}),"Dr Felipe Castillo"]}),e("button",{className:"navbar-toggler",type:"button","data-bs-toggle":"collapse","data-bs-target":"#navbarSupportedContent","aria-controls":"navbarSupportedContent","aria-expanded":"false","aria-label":"Toggle navigation",children:e("span",{className:"navbar-toggler-icon"})}),e("div",{className:"collapse navbar-collapse",id:"navbarSupportedContent",children:r("ul",{className:"navbar-nav me-auto mb-2 mb-lg-0",children:[e("li",{className:"nav-item",children:e(k,{to:"/",className:"nav-link",children:"Inicio"})}),e("li",{className:"nav-item",children:e(k,{to:"/crear-cita",className:"nav-link",children:"Crear Cita"})}),e("li",{className:"nav-item",children:e("button",{className:"btn btn-danger",onClick:()=>{console.log("cerrando sesion"),t()},children:"Cerrar Sesion"})})]})})]})})},v=i.exports.createContext(),H=({cita:a})=>{const t=i.exports.useContext(v),{obtenerCita:n}=t,c=C(),l=async()=>{await n(a._id),c(`/cita/${a._id}`)},o=["enero","febrero","marzo","abril","mayo","junio","julio","agosto","septiembre","octubre","noviembre","diciembre"],d=["Domingo","Lunes","Martes","Mi\xE9rcoles","Jueves","Viernes","S\xE1bado"],s=new Date(a.fecha),u=d[s.getDay()]+", "+(s.getDate()+1)+" de "+o[s.getMonth()]+" de "+s.getUTCFullYear();return e("div",{className:"card my-2 border-primary",children:r("div",{className:"card-body",style:{padding:"0.5rem"},children:[r("h5",{className:"card-title",children:["Hora: ",a?a.hora:""]}),r("p",{className:"card-text",children:["Fecha : ",a?u:""," hrs"]}),r("p",{className:"card-text",style:{"margin-block":"0.5rem","margin-bottom":"0"},children:["Paciente: ",a?a.nombre:""," "]}),e("div",{className:"d-flex justify-content-end",children:e("a",{onClick:l,className:"btn btn-primary",children:"Ver"})})]})})},V=()=>{const a=i.exports.useContext(v),{citas:t,obtenerCitas:n,citasFecha:c}=a,l=o=>{c(o.target.value)};return i.exports.useEffect(async()=>{await n()},[]),r(B,{children:[e(I,{}),r("div",{className:"container mx-auto mt-5 row",children:[e("input",{type:"date",className:"form-control",placeholder:"Fecha",onChange:l}),t.length?t.map(o=>e(H,{cita:o},o._id)):e("p",{className:" text-center p-5 disponibles",children:"No hay citas"})]})]})},J=()=>{const a=i.exports.useContext(v),{eliminarCita:t,cita:n,actualizarCita:c}=a,l=C(),[o,d]=i.exports.useState({}),s=g=>{d(b(p({},o),{[g.target.name]:g.target.value}))},u=g=>{g.preventDefault(),c(o),l("/")};return i.exports.useEffect(()=>{n&&d(n)},[]),r(i.exports.Fragment,{children:[e(I,{}),r("form",{className:"row g-3 container mx-auto mt-3",onSubmit:u,children:[r("div",{className:"col-md-6",children:[e("label",{className:"form-label",children:"Nombre del Paciente"}),e("input",{type:"text",name:"nombre",className:"form-control",value:o.nombre,onChange:s,required:!0})]}),r("div",{className:"col-md-6",children:[e("label",{className:"form-label",children:"Telefono de Contacto"}),e("input",{type:"number",className:"form-control",name:"numero",value:o.numero,onChange:s,required:!0})]}),r("div",{className:"col-md-6",children:[e("label",{className:"form-label",children:"Telfono de Contacto 2 (opcional)"}),e("input",{type:"number",name:"numero2",className:"form-control",value:o.numero2,onChange:s})]}),r("div",{className:"col-md-6",children:[e("label",{className:"form-label",children:"Correo (opcional)"}),e("input",{type:"email",className:"form-control",name:"email",value:o.email,onChange:s})]}),r("div",{className:"col-md-6",children:[e("label",{className:"form-label",children:"Fecha"}),e("input",{type:"date",name:"fecha",className:"form-control",value:`${o.fecha}`.substring(0,10),onChange:s,required:!0})]}),r("div",{className:"col-md-6",children:[e("label",{className:"form-label",children:"Hora"}),e("input",{type:"time",className:"form-control",name:"hora",value:o.hora,onChange:s,required:!0})]}),r("div",{className:"col-md-6",children:[e("label",{className:"form-label",children:"Tipo de Cita"}),r("select",{className:"form-control",name:"tipo",value:o.tipo,onChange:s,children:[e("option",{value:"Consulta",children:"Consulta"}),e("option",{value:"Ginecologia",children:"Ginecologia"}),e("option",{value:"Infertilidad",children:"Infertilidad"}),e("option",{value:"Embarazo",children:"Embarazo"}),e("option",{value:"Chequeo",children:"Chequeo"}),e("option",{value:"Otro",children:"Otro"})]})]}),r("div",{className:"col-md-6",children:[e("label",{className:"form-label",children:"Costo"}),e("input",{type:"number",className:"form-control",name:"costo",value:o.costo,onChange:s})]}),r("div",{className:"",children:[e("label",{className:"form-label",children:"Hospital"}),e("input",{type:"text",className:"form-control",name:"hospital",value:o.hospital,onChange:s})]}),r("div",{className:"form-group",children:[e("label",{className:"center",children:"Informacion Adicional (opcional)"}),e("textarea",{className:"form-control",rows:"4",name:"informacion",value:o.informacion,onChange:s})]}),r("div",{className:"col-12 d-flex flex-row-reverse",children:[e("button",{type:"submit",className:"btn btn-primary",children:"Guardar"}),e("button",{type:"button",className:"btn btn-danger mx-2",onClick:()=>{t(o._id),l("/")},children:"Eliminar"})]})]})]})},K=()=>{const a=i.exports.useContext(v),{crearCita:t}=a,[n,c]=i.exports.useState({}),l=C(),o=s=>{c(b(p({},n),{[s.target.name]:s.target.value}))},d=s=>{s.preventDefault(),t(n),l("/")};return r(i.exports.Fragment,{children:[e(I,{}),r("form",{className:"row g-3 container mx-auto mt-3",onSubmit:d,children:[r("div",{className:"col-md-6",children:[e("label",{className:"form-label",children:"Nombre del Paciente"}),e("input",{type:"text",name:"nombre",className:"form-control",onChange:o,required:!0})]}),r("div",{className:"col-md-6",children:[e("label",{className:"form-label",children:"Telefono de Contacto"}),e("input",{type:"number",className:"form-control",name:"numero",onChange:o,required:!0})]}),r("div",{className:"col-md-6",children:[e("label",{className:"form-label",children:"Telfono de Contacto 2 (opcional)"}),e("input",{type:"number",name:"numero2",className:"form-control",onChange:o})]}),r("div",{className:"col-md-6",children:[e("label",{className:"form-label",children:"Correo (opcional)"}),e("input",{type:"email",className:"form-control",name:"email",onChange:o})]}),r("div",{className:"col-md-6",children:[e("label",{className:"form-label",children:"Fecha"}),e("input",{type:"date",name:"fecha",className:"form-control",onChange:o,required:!0})]}),r("div",{className:"col-md-6",children:[e("label",{className:"form-label",children:"Hora"}),e("input",{type:"time",className:"form-control",name:"hora",required:!0,onChange:o})]}),r("div",{className:"col-md-6",children:[e("label",{className:"form-label",children:"Tipo de Cita (opcional)"}),r("select",{className:"form-control",name:"tipo",onChange:o,children:[e("option",{value:"Consulta",children:"Consulta"}),e("option",{value:"Ginecologia",children:"Ginecologia"}),e("option",{value:"Infertilidad",children:"Infertilidad"}),e("option",{value:"Embarazo",children:"Embarazo"}),e("option",{value:"Chequeo",children:"Chequeo"}),e("option",{value:"Otro",children:"Otro"})]})]}),r("div",{className:"col-md-6",children:[e("label",{className:"form-label",children:"Costo"}),e("input",{type:"number",className:"form-control",name:"costo",onChange:o})]}),r("div",{className:"",children:[e("label",{className:"form-label",children:"Hospital (opcional)"}),e("input",{type:"text",className:"form-control",name:"hospital",onChange:o})]}),r("div",{className:"form-group",children:[e("label",{className:"center",children:"Informacion Adicional (opcional)"}),e("textarea",{className:"form-control",rows:"4",name:"informacion",onChange:o})]}),e("div",{className:"col-12 d-flex flex-row-reverse",children:e("button",{type:"submit",className:"btn btn-primary",children:"Guardar"})})]})]})},w=({children:a})=>{const t=i.exports.useContext(x),{autenticado:n,obtenerUsuario:c,usuario:l}=t;return i.exports.useEffect(async()=>{l||await c()},[n]),n?a:e(F,{to:"/login"})},f=U.create({baseURL:window.location.origin}),E=a=>{a?f.defaults.headers.common["x-token"]=a:delete f.defaults.headers.common["x-token"]};var Y=(a,t)=>{switch(t.type){case"OBTENER_CITAS":return b(p({},a),{citas:t.payload,cita:null});case"OBTENER_CITA":return b(p({},a),{cita:t.payload});case"CREAR_CITA":return b(p({},a),{citas:[...a.citas,t.payload],cita:null});case"ELIMINAR_CITA":return b(p({},a),{citas:a.citas.filter(n=>n.id!==t.payload)});case"ACTUALIZAR_CITA":return b(p({},a),{citas:a.citas.map(n=>n.id===t.payload.id?t.payload:n),cita:null});case"CITA_NULL":return b(p({},a),{cita:null});default:return a}};const Z=a=>{const t={citas:[],cita:{}},[n,c]=i.exports.useReducer(Y,t),l=async()=>{try{const h=(await f.get("/citas")).data;c({type:"OBTENER_CITAS",payload:h})}catch(m){console.log(m.response)}},o=async m=>{try{const N=(await f.get(`/citas/fecha/${m}`)).data;c({type:"OBTENER_CITAS",payload:N})}catch(h){console.log(h.response)}},d=async m=>{try{const N=(await f.get(`/citas/${m}`)).data;return console.log(N),c({type:"OBTENER_CITA",payload:N}),N}catch(h){console.log(h.response)}},s=async m=>{try{await f.post("/citas",m),alert("Se ha creado la cita correctamente"),l()}catch(h){console.log(h.response)}},u=async m=>{try{await f.delete(`/citas/${m}`),l(),alert("Se ha eliminado la cita correctamente")}catch(h){console.log(h)}},g=async m=>{try{const h=await f.put(`/citas/${m._id}`,m);alert("Se ha actualizado la cita correctamente"),l()}catch(h){console.log(h)}};return e(v.Provider,{value:{citas:n.citas,cita:n.cita,fecha:n.fecha,obtenerCitas:l,obtenerCita:d,crearCita:s,eliminarCita:u,actualizarCita:g,citasFecha:o},children:a.children})};var Q=(a,t)=>{switch(t.type){case"LOGIN":return localStorage.setItem("x-token",t.payload.token),b(p({},a),{usuario:t.payload.usuario,autenticado:!0,token:t.payload.token});case"LOGOUT":return b(p({},a),{usuario:null,autenticado:!1,token:null});case"USUARIO":return localStorage.setItem("x-token",t.payload.token),b(p({},a),{usuario:t.payload,autenticado:!0,token:t.payload.token});default:return a}};const W=a=>{const t={token:localStorage.getItem("x-token"),autenticado:null,usuario:null,cargando:!0},[n,c]=i.exports.useReducer(Q,t),l=async s=>{try{const u=await f.post("/auth/singin",s),{token:g,usuario:m}=u.data;c({type:"LOGIN",payload:{token:g,usuario:m}}),E(g)}catch(u){alert("No se pudo iniciar sesion, intentalo de nuevo"),console.log(u)}},o=()=>{delete f.defaults.headers.common["user-token"],localStorage.removeItem("x-token"),c({type:"LOGOUT"})},d=async()=>{try{E(localStorage.getItem("x-token"));const s=await f.get("/auth/usuario");c({type:"USUARIO",payload:s.data}),localStorage.setItem("x-token",s.data.token),E(s.data.token)}catch(s){console.log(s.response)}};return e(x.Provider,{value:{usuario:n.usuario,cargando:n.cargando,autenticado:n.autenticado,token:n.token,login:l,cerrarSesion:o,obtenerUsuario:d},children:a.children})};function X(){return e(W,{children:e(Z,{children:e(j,{children:r(G,{children:[e(y,{path:"/login",element:e(P,{})}),e(y,{path:"/",element:e(w,{children:e(V,{})})}),e(y,{path:"/crear-cita",element:e(w,{children:e(K,{})})}),e(y,{path:"/cita/:id",element:e(w,{children:e(J,{})})})]})})})})}D.render(e($.StrictMode,{children:e(X,{})}),document.getElementById("root"));
