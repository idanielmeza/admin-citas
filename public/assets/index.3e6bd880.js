var T=Object.defineProperty,A=Object.defineProperties;var q=Object.getOwnPropertyDescriptors;var O=Object.getOwnPropertySymbols;var L=Object.prototype.hasOwnProperty,G=Object.prototype.propertyIsEnumerable;var R=(t,n,a)=>n in t?T(t,n,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[n]=a,p=(t,n)=>{for(var a in n||(n={}))L.call(n,a)&&R(t,a,n[a]);if(O)for(var a of O(n))G.call(n,a)&&R(t,a,n[a]);return t},b=(t,n)=>A(t,q(n));import{r as i,j as w,u as v,L as I,N as _,a as $,B as z,R as F,b as y,c as U,d as P}from"./vendor.f01e59db.js";const D=function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))c(l);new MutationObserver(l=>{for(const r of l)if(r.type==="childList")for(const d of r.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&c(d)}).observe(document,{childList:!0,subtree:!0});function a(l){const r={};return l.integrity&&(r.integrity=l.integrity),l.referrerpolicy&&(r.referrerPolicy=l.referrerpolicy),l.crossorigin==="use-credentials"?r.credentials="include":l.crossorigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function c(l){if(l.ep)return;l.ep=!0;const r=a(l);fetch(l.href,r)}};D();const x=i.exports.createContext(),e=w.exports.jsx,o=w.exports.jsxs,j=w.exports.Fragment,B=()=>{const t=i.exports.useContext(x),{login:n,autenticado:a}=t,c=v();i.exports.useEffect(()=>{a&&c("/")},[a]);const[l,r]=i.exports.useState({email:"",password:""}),d=u=>{r(b(p({},l),{[u.target.name]:u.target.value}))};return e("div",{className:"container mt-5 mx-auto",children:o("form",{onSubmit:u=>{u.preventDefault(),n(l)},children:[o("div",{className:"mb-3",children:[e("label",{className:"form-label",children:"E-mail"}),e("input",{type:"email",className:"form-control","aria-describedby":"emailHelp",name:"email",onChange:d})]}),o("div",{className:"mb-3",children:[e("label",{className:"form-label",children:"Contrasena"}),e("input",{type:"password",className:"form-control",name:"password",onChange:d})]}),e("div",{className:"d-flex flex-row-reverse",children:e("button",{type:"submit",className:"btn btn-primary",children:"Conectar"})})]})})};var M="/assets/logo2.2ebef660.svg";const S=()=>{const t=i.exports.useContext(x),{cerrarSesion:n}=t;return e("nav",{className:"navbar navbar-dark bg-primary",children:o("div",{className:"container-fluid",children:[o(I,{className:"navbar-brand",to:"/",children:[e("img",{src:M,width:"30",height:"30",className:"d-inline-block align-top mx-2",alt:""}),"Dr Felipe Castillo Cordova"]}),e("button",{className:"navbar-toggler",type:"button","data-bs-toggle":"collapse","data-bs-target":"#navbarSupportedContent","aria-controls":"navbarSupportedContent","aria-expanded":"false","aria-label":"Toggle navigation",children:e("span",{className:"navbar-toggler-icon"})}),e("div",{className:"collapse navbar-collapse",id:"navbarSupportedContent",children:o("ul",{className:"navbar-nav me-auto mb-2 mb-lg-0",children:[e("li",{className:"nav-item",children:e(I,{to:"/",className:"nav-link",children:"Inicio"})}),e("li",{className:"nav-item",children:e(I,{to:"/crear-cita",className:"nav-link",children:"Crear Cita"})}),e("li",{className:"nav-item",children:e("button",{className:"btn btn-danger",onClick:()=>{n()},children:"Cerrar Sesion"})})]})})]})})},N=i.exports.createContext(),H=({cita:t})=>{const n=i.exports.useContext(N),{obtenerCita:a}=n,c=v(),l=async()=>{await a(t._id),c(`/cita/${t._id}`)},r=["enero","febrero","marzo","abril","mayo","junio","julio","agosto","septiembre","octubre","noviembre","diciembre"],d=["Domingo","Lunes","Martes","Mi\xE9rcoles","Jueves","Viernes","S\xE1bado"],s=new Date(t.fecha),u=d[s.getDay()]+", "+(s.getDate()+1)+" de "+r[s.getMonth()]+" de "+s.getUTCFullYear();return o("tr",{children:[e("th",{scope:"row",children:e("button",{type:"button",className:"btn btn-link text-uppercase text-primary",onClick:l,children:t.nombre})}),e("td",{children:t.tipo}),e("td",{children:t.edad||"Sin Informacion"}),e("td",{children:u}),e("td",{children:t.costo||"Sin Informacion"})]})},J=({citas:t})=>{const n=t.length,a={Consulta:{cantidad:0,dinero:0},Ginecologia:{cantidad:0,dinero:0},Infertilidad:{cantidad:0,dinero:0},Embarazo:{cantidad:0,dinero:0},Chequeo:{cantidad:0,dinero:0},Otro:{cantidad:0,dinero:0},noPagadas:0,total:0};return t.forEach(c=>{switch(c.tipo){case"Consulta":a.Consulta.cantidad++,a.Consulta.dinero+=c.costo||0;break;case"Ginecologia":a.Ginecologia.cantidad++,a.Ginecologia.dinero+=c.costo||0;break;case"Infertilidad":a.Infertilidad.cantidad++,a.Infertilidad.dinero+=c.costo||0;break;case"Embarazo":a.Embarazo.cantidad++,a.Embarazo.dinero+=c.costo||0;break;case"Chequeo":a.Chequeo.cantidad++,a.Chequeo.dinero+=c.costo||0;break;case"Otro":a.Otro.cantidad++,a.Otro.dinero+=c.costo||0;break}c.costo===0||!c.costo?a.noPagadas++:a.total+=c.costo}),e("div",{class:"accordion accordion-flush my-2",id:"accordionFlushExample",children:o("div",{class:"accordion-item",children:[e("h2",{class:"accordion-header",id:"flush-headingOne",children:e("button",{class:"accordion-button collapsed",type:"button","data-bs-toggle":"collapse","data-bs-target":"#flush-collapseOne","aria-expanded":"false","aria-controls":"flush-collapseOne",children:"Resumen"})}),e("div",{id:"flush-collapseOne",class:"accordion-collapse collapse","aria-labelledby":"flush-headingOne","data-bs-parent":"#accordionFlushExample",children:e("div",{class:"accordion-body",children:o("table",{class:"table",children:[e("thead",{children:o("tr",{children:[e("th",{scope:"col",children:"Tipo"}),e("th",{scope:"col",children:"Cantidad"}),e("th",{scope:"col",children:"Dinero"})]})}),o("tbody",{children:[o("tr",{children:[e("th",{scope:"row",children:"Consulta"}),e("td",{children:a.Consulta.cantidad}),o("td",{children:["$",a.Consulta.dinero]})]}),o("tr",{children:[e("th",{scope:"row",children:"Ginecologia"}),e("td",{children:a.Ginecologia.cantidad}),o("td",{children:["$",a.Ginecologia.dinero]})]}),o("tr",{children:[e("th",{scope:"row",children:"Embarazo"}),e("td",{children:a.Embarazo.cantidad}),o("td",{children:["$",a.Embarazo.dinero]})]}),o("tr",{children:[e("th",{scope:"row",children:"Infertilidad"}),e("td",{children:a.Infertilidad.cantidad}),o("td",{children:["$",a.Infertilidad.dinero]})]}),o("tr",{children:[e("th",{scope:"row",children:"Chequeo"}),e("td",{children:a.Chequeo.cantidad}),o("td",{children:["$",a.Chequeo.dinero]})]}),o("tr",{children:[e("th",{scope:"row",children:"Otro"}),e("td",{children:a.Otro.cantidad}),o("td",{children:["$",a.Otro.dinero]})]}),o("tr",{children:[e("th",{scope:"row ",children:e("span",{className:"text-danger",children:"No Pagadas"})}),e("td",{children:a.noPagadas})]}),o("tr",{children:[e("th",{scope:"row",children:e("span",{className:"text-primary",children:"Resumen"})}),e("td",{children:n}),o("td",{children:["$",a.total]})]})]})]})})})]})})},K=()=>{const t=i.exports.useContext(N),{citas:n,obtenerCitas:a,citasFecha:c}=t,l=r=>{c(r.target.value)};return i.exports.useEffect(async()=>{await a()},[]),o(j,{children:[e(S,{}),o("div",{className:"container mx-auto mt-5 row",children:[e("div",{className:"col",children:e("input",{type:"date",className:"form-control",placeholder:"Fecha",onChange:l})}),e(J,{citas:n}),o("table",{className:"table table-bordered my-2",children:[e("thead",{children:o("tr",{children:[e("th",{scope:"col",children:"Paciente"}),e("th",{scope:"col",children:"Tipo"}),e("th",{scope:"col",children:"Edad"}),e("th",{scope:"col",children:"Fecha"}),e("th",{scope:"col",children:"Costo"})]})}),n.length?n.map(r=>e(H,{cita:r},r._id)):null]})]})]})},V=()=>{const t=i.exports.useContext(N),{eliminarCita:n,cita:a,actualizarCita:c}=t,l=v(),[r,d]=i.exports.useState({}),s=g=>{d(b(p({},r),{[g.target.name]:g.target.value}))},u=g=>{g.preventDefault(),c(r),l("/")};return i.exports.useEffect(()=>{a&&d(a)},[]),o(i.exports.Fragment,{children:[e(S,{}),o("form",{className:"row g-3 container mx-auto mt-3",onSubmit:u,children:[o("div",{className:"col-md-6",children:[e("label",{className:"form-label",children:"Nombre del Paciente"}),e("input",{type:"text",name:"nombre",className:"form-control",value:r.nombre,onChange:s,required:!0})]}),o("div",{className:"col-md-6",children:[e("label",{className:"form-label",children:"Telefono de Contacto"}),e("input",{type:"number",className:"form-control",name:"numero",value:r.numero,onChange:s,required:!0})]}),o("div",{className:"col-md-6",children:[e("label",{className:"form-label",children:"Telfono de Contacto 2 (opcional)"}),e("input",{type:"number",name:"numero2",className:"form-control",value:r.numero2,onChange:s})]}),o("div",{className:"col-md-6",children:[e("label",{className:"form-label",children:"Correo (opcional)"}),e("input",{type:"email",className:"form-control",name:"email",value:r.email,onChange:s})]}),o("div",{className:"col-md-6",children:[e("label",{className:"form-label",children:"Fecha"}),e("input",{type:"date",name:"fecha",className:"form-control",value:`${r.fecha}`.substring(0,10),onChange:s,required:!0})]}),o("div",{className:"col-md-6",children:[e("label",{className:"form-label",children:"Hora"}),e("input",{type:"time",className:"form-control",name:"hora",value:r.hora,onChange:s,required:!0})]}),o("div",{className:"col-md-6",children:[e("label",{className:"form-label",children:"Tipo de Cita"}),o("select",{className:"form-control",name:"tipo",value:r.tipo,onChange:s,required:!0,children:[e("option",{value:"Consulta",children:"Consulta"}),e("option",{value:"Ginecologia",children:"Ginecologia"}),e("option",{value:"Infertilidad",children:"Infertilidad"}),e("option",{value:"Embarazo",children:"Embarazo"}),e("option",{value:"Chequeo",children:"Chequeo"}),e("option",{value:"Otro",children:"Otro"})]})]}),o("div",{className:"col-md-6",children:[e("label",{className:"form-label",children:"Costo"}),e("input",{type:"number",className:"form-control",name:"costo",value:r.costo,onChange:s})]}),o("div",{className:"col-md-6",children:[e("label",{className:"form-label",children:"Hospital"}),e("input",{type:"text",className:"form-control",name:"hospital",value:r.hospital,onChange:s})]}),o("div",{className:"col-md-6",children:[e("label",{className:"form-label",children:"Edad (opcional)"}),e("input",{type:"number",className:"form-control",name:"edad",onChange:s,value:r.edad})]}),o("div",{className:"form-group",children:[e("label",{className:"center",children:"Informacion Adicional (opcional)"}),e("textarea",{className:"form-control",rows:"4",name:"informacion",value:r.informacion,onChange:s})]}),o("div",{className:"col-12 d-flex flex-row-reverse",children:[e("button",{type:"submit",className:"btn btn-primary",children:"Guardar"}),e("button",{type:"button",className:"btn btn-danger mx-2",onClick:()=>{n(r._id),l("/")},children:"Eliminar"})]})]})]})},Y=()=>{const t=i.exports.useContext(N),{crearCita:n}=t,[a,c]=i.exports.useState({}),l=v(),r=s=>{c(b(p({},a),{[s.target.name]:s.target.value}))},d=s=>{s.preventDefault(),n(a),l("/")};return o(i.exports.Fragment,{children:[e(S,{}),o("form",{className:"row g-3 container mx-auto mt-3",onSubmit:d,children:[o("div",{className:"col-md-6",children:[e("label",{className:"form-label",children:"Nombre del Paciente"}),e("input",{type:"text",name:"nombre",className:"form-control",onChange:r,required:!0})]}),o("div",{className:"col-md-6",children:[e("label",{className:"form-label",children:"Telefono de Contacto"}),e("input",{type:"number",className:"form-control",name:"numero",onChange:r,required:!0})]}),o("div",{className:"col-md-6",children:[e("label",{className:"form-label",children:"Telfono de Contacto 2 (opcional)"}),e("input",{type:"number",name:"numero2",className:"form-control",onChange:r})]}),o("div",{className:"col-md-6",children:[e("label",{className:"form-label",children:"Correo (opcional)"}),e("input",{type:"email",className:"form-control",name:"email",onChange:r})]}),o("div",{className:"col-md-6",children:[e("label",{className:"form-label",children:"Fecha"}),e("input",{type:"date",name:"fecha",className:"form-control",onChange:r,required:!0})]}),o("div",{className:"col-md-6",children:[e("label",{className:"form-label",children:"Hora"}),e("input",{type:"time",className:"form-control",name:"hora",required:!0,onChange:r})]}),o("div",{className:"col-md-6",children:[e("label",{className:"form-label",children:"Tipo de Cita (opcional)"}),o("select",{className:"form-control",name:"tipo",onChange:r,required:!0,children:[e("option",{value:"",disabled:!0,selected:!0,children:"Seleccione una opcion"}),e("option",{value:"Consulta",children:"Consulta"}),e("option",{value:"Ginecologia",children:"Ginecologia"}),e("option",{value:"Infertilidad",children:"Infertilidad"}),e("option",{value:"Embarazo",children:"Embarazo"}),e("option",{value:"Chequeo",children:"Chequeo"}),e("option",{value:"Otro",children:"Otro"})]})]}),o("div",{className:"col-md-6",children:[e("label",{className:"form-label",children:"Costo"}),e("input",{type:"number",className:"form-control",name:"costo",onChange:r})]}),o("div",{className:"col-md-6",children:[e("label",{className:"form-label",children:"Hospital (opcional)"}),e("input",{type:"text",className:"form-control",name:"hospital",onChange:r})]}),o("div",{className:"col-md-6",children:[e("label",{className:"form-label",children:"Edad (opcional)"}),e("input",{type:"number",className:"form-control",name:"edad",onChange:r})]}),o("div",{className:"form-group",children:[e("label",{className:"center",children:"Informacion Adicional (opcional)"}),e("textarea",{className:"form-control",rows:"4",name:"informacion",onChange:r})]}),e("div",{className:"col-12 d-flex flex-row-reverse",children:e("button",{type:"submit",className:"btn btn-primary",children:"Guardar"})})]})]})},E=({children:t})=>{const n=i.exports.useContext(x),{autenticado:a,obtenerUsuario:c,usuario:l}=n;return i.exports.useEffect(async()=>{l||await c()},[a]),a?t:e(_,{to:"/login"})},f=$.create({baseURL:window.location.origin}),k=t=>{t?f.defaults.headers.common["x-token"]=t:delete f.defaults.headers.common["x-token"]};var Z=(t,n)=>{switch(n.type){case"OBTENER_CITAS":return b(p({},t),{citas:n.payload,cita:null});case"OBTENER_CITA":return b(p({},t),{cita:n.payload});case"CREAR_CITA":return b(p({},t),{citas:[...t.citas,n.payload],cita:null});case"ELIMINAR_CITA":return b(p({},t),{citas:t.citas.filter(a=>a.id!==n.payload)});case"ACTUALIZAR_CITA":return b(p({},t),{citas:t.citas.map(a=>a.id===n.payload.id?n.payload:a),cita:null});case"CITA_NULL":return b(p({},t),{cita:null});default:return t}};const Q=t=>{const n={citas:[],cita:{}},[a,c]=i.exports.useReducer(Z,n),l=async()=>{try{const h=(await f.get("/citas")).data;c({type:"OBTENER_CITAS",payload:h})}catch(m){console.log(m.response)}},r=async m=>{try{const C=(await f.get(`/citas/fecha/${m}`)).data;c({type:"OBTENER_CITAS",payload:C})}catch(h){console.log(h.response)}},d=async m=>{try{const C=(await f.get(`/citas/${m}`)).data;return console.log(C),c({type:"OBTENER_CITA",payload:C}),C}catch(h){console.log(h.response)}},s=async m=>{try{await f.post("/citas",m),alert("Se ha creado la cita correctamente"),l()}catch(h){console.log(h.response)}},u=async m=>{try{await f.delete(`/citas/${m}`),l(),alert("Se ha eliminado la cita correctamente")}catch(h){console.log(h)}},g=async m=>{try{const h=await f.put(`/citas/${m._id}`,m);alert("Se ha actualizado la cita correctamente"),l()}catch(h){console.log(h)}};return e(N.Provider,{value:{citas:a.citas,cita:a.cita,fecha:a.fecha,obtenerCitas:l,obtenerCita:d,crearCita:s,eliminarCita:u,actualizarCita:g,citasFecha:r},children:t.children})};var W=(t,n)=>{switch(n.type){case"LOGIN":return localStorage.setItem("x-token",n.payload.token),b(p({},t),{usuario:n.payload.usuario,autenticado:!0,token:n.payload.token});case"LOGOUT":return b(p({},t),{usuario:null,autenticado:!1,token:null});case"USUARIO":return localStorage.setItem("x-token",n.payload.token),b(p({},t),{usuario:n.payload,autenticado:!0,token:n.payload.token});default:return t}};const X=t=>{const n={token:localStorage.getItem("x-token"),autenticado:null,usuario:null,cargando:!0},[a,c]=i.exports.useReducer(W,n),l=async s=>{try{const u=await f.post("/auth/singin",s),{token:g,usuario:m}=u.data;c({type:"LOGIN",payload:{token:g,usuario:m}}),k(g)}catch(u){alert("No se pudo iniciar sesion, intentalo de nuevo"),console.log(u)}},r=()=>{delete f.defaults.headers.common["user-token"],localStorage.removeItem("x-token"),c({type:"LOGOUT"})},d=async()=>{try{k(localStorage.getItem("x-token"));const s=await f.get("/auth/usuario");c({type:"USUARIO",payload:s.data}),localStorage.setItem("x-token",s.data.token),k(s.data.token)}catch(s){console.log(s.response)}};return e(x.Provider,{value:{usuario:a.usuario,cargando:a.cargando,autenticado:a.autenticado,token:a.token,login:l,cerrarSesion:r,obtenerUsuario:d},children:t.children})};function ee(){return e(X,{children:e(Q,{children:e(z,{children:o(F,{children:[e(y,{path:"/login",element:e(B,{})}),e(y,{path:"/",element:e(E,{children:e(K,{})})}),e(y,{path:"/crear-cita",element:e(E,{children:e(Y,{})})}),e(y,{path:"/cita/:id",element:e(E,{children:e(V,{})})})]})})})})}U.render(e(P.StrictMode,{children:e(ee,{})}),document.getElementById("root"));
